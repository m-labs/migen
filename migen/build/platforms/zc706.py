from migen.build.generic_platform import *
from migen.build.xilinx import XilinxPlatform


_io = [
    ("clk200", 0,
        Subsignal("p", Pins("H9"), IOStandard("DIFF_SSTL15")),
        Subsignal("n", Pins("G9"), IOStandard("DIFF_SSTL15"))
    ),

    ("user_led", 0, Pins("Y21"), IOStandard("LVCMOS25")),
    ("user_led", 1, Pins("G2"), IOStandard("LVCMOS15")),
    ("user_led", 2, Pins("W21"), IOStandard("LVCMOS25")),
    ("user_led", 3, Pins("A17"), IOStandard("LVCMOS15")),

    ("serial", 0,
        Subsignal("tx", Pins("C19")),
        Subsignal("rx", Pins("D18")),
        IOStandard("LVCMOS18")),

    ("user_sma_clock", 0,
        Subsignal("p", Pins("AD18"), IOStandard("LVDS_25"),
            Misc("DIFF_TERM=TRUE")),
        Subsignal("n", Pins("AD19"), IOStandard("LVDS_25"),
            Misc("DIFF_TERM=TRUE"))
    ),
]

_connectors = [
    ("HPC", {
        "DP1_M2C_P": "A2",
        "DP1_M2C_N": "A3",
        "DP2_M2C_P": "A6",
        "DP2_M2C_N": "A7",
        "DP3_M2C_P": "A10",
        "DP3_M2C_N": "A11",
        "DP4_M2C_P": "A14",
        "DP4_M2C_N": "A15",
        "DP5_M2C_P": "A18",
        "DP5_M2C_N": "A19",
        "DP1_C2M_P": "A22",
        "DP1_C2M_N": "A23",
        "DP2_C2M_P": "A26",
        "DP2_C2M_N": "A27",
        "DP3_C2M_P": "A30",
        "DP3_C2M_N": "A31",
        "DP4_C2M_P": "A34",
        "DP4_C2M_N": "A35",
        "DP5_C2M_P": "A38",
        "DP5_C2M_N": "A39",
        "DP7_M2C_P": "B12",
        "DP7_M2C_N": "B13",
        "DP6_M2C_P": "B16",
        "DP6_M2C_N": "B17",
        "GBTCLK1_M2C_P": "B20",
        "GBTCLK1_M2C_N": "B21",
        "DP7_C2M_P": "B32",
        "DP7_C2M_N": "B33",
        "DP6_C2M_P": "B36",
        "DP6_C2M_N": "B37",
        "DP0_C2M_P": "C2",
        "DP0_C2M_N": "C3",
        "DP0_M2C_P": "C6",
        "DP0_M2C_N": "C7",
        "LA06_P": "C10",
        "LA06_N": "C11",
        "LA10_P": "C14",
        "LA10_N": "C15",
        "LA14_P": "C18",
        "LA14_N": "C19",
        "LA18_CC_P": "C22",
        "LA18_CC_N": "C23",
        "LA27_P": "C26",
        "LA27_N": "C27",
        "GBTCLK0_M2C_P": "D4",
        "GBTCLK0_M2C_N": "D5",
        "LA01_CC_P": "D8",
        "LA01_CC_N": "D9",
        "LA05_P": "D11",
        "LA05_N": "D12",
        "LA09_P": "D14",
        "LA09_N": "D15",
        "LA13_P": "D17",
        "LA13_N": "D18",
        "LA17_CC_P": "D20",
        "LA17_CC_N": "D21",
        "LA23_P": "D23",
        "LA23_N": "D24",
        "LA26_P": "D26",
        "LA26_N": "D27",
        "CLK1_M2C_P": "G2",
        "CLK1_M2C_N": "G3",
        "LA00_CC_P": "G6",
        "LA00_CC_N": "G7",
        "LA03_P": "G9",
        "LA03_N": "G10",
        "LA08_P": "G12",
        "LA08_N": "G13",
        "LA12_P": "G15",
        "LA12_N": "G16",
        "LA16_P": "G18",
        "LA16_N": "G19",
        "LA20_P": "G21",
        "LA20_N": "G22",
        "LA22_P": "G24",
        "LA22_N": "G25",
        "LA25_P": "G27",
        "LA25_N": "G28",
        "LA29_P": "G30",
        "LA29_N": "G31",
        "LA31_P": "G33",
        "LA31_N": "G34",
        "LA33_P": "G36",
        "LA33_N": "G37",
        "CLK0_M2C_P": "H4",
        "CLK0_M2C_N": "H5",
        "LA02_P": "H7",
        "LA02_N": "H8",
        "LA04_P": "H10",
        "LA04_N": "H11",
        "LA07_P": "H13",
        "LA07_N": "H14",
        "LA11_P": "H16",
        "LA11_N": "H17",
        "LA15_P": "H19",
        "LA15_N": "H20",
        "LA19_P": "H22",
        "LA19_N": "H23",
        "LA21_P": "H25",
        "LA21_N": "H26",
        "LA24_P": "H28",
        "LA24_N": "H29",
        "LA28_P": "H31",
        "LA28_N": "H32",
        "LA30_P": "H34",
        "LA30_N": "H35",
        "LA32_P": "H37",
        "LA32_N": "H38",
        }
    ),
    ("LPC", {
        "DP0_C2M_P": "C2",
        "DP0_C2M_N": "C3",
        "DP0_M2C_P": "C6",
        "DP0_M2C_N": "C7",
        "LA06_P": "C10",
        "LA06_N": "C11",
        "LA10_P": "C14",
        "LA10_N": "C15",
        "LA14_P": "C18",
        "LA14_N": "C19",
        "LA18_CC_P": "C22",
        "LA18_CC_N": "C23",
        "LA27_P": "C26",
        "LA27_N": "C27",
        "GBTCLK0_M2C_P": "D4",
        "GBTCLK0_M2C_N": "D5",
        "LA01_CC_P": "D8",
        "LA01_CC_N": "D9",
        "LA05_P": "D11",
        "LA05_N": "D12",
        "LA09_P": "D14",
        "LA09_N": "D15",
        "LA13_P": "D17",
        "LA13_N": "D18",
        "LA17_CC_P": "D20",
        "LA17_CC_N": "D21",
        "LA23_P": "D23",
        "LA23_N": "D24",
        "LA26_P": "D26",
        "LA26_N": "D27",
        "CLK1_M2C_P": "G2",
        "CLK1_M2C_N": "G3",
        "LA00_CC_P": "G6",
        "LA00_CC_N": "G7",
        "LA03_P": "G9",
        "LA03_N": "G10",
        "LA08_P": "G12",
        "LA08_N": "G13",
        "LA12_P": "G15",
        "LA12_N": "G16",
        "LA16_P": "G18",
        "LA16_N": "G19",
        "LA20_P": "G21",
        "LA20_N": "G22",
        "LA22_P": "G24",
        "LA22_N": "G25",
        "LA25_P": "G27",
        "LA25_N": "G28",
        "LA29_P": "G30",
        "LA29_N": "G31",
        "LA31_P": "G33",
        "LA31_N": "G34",
        "LA33_P": "G36",
        "LA33_N": "G37",
        "CLK0_M2C_P": "H4",
        "CLK0_M2C_N": "H5",
        "LA02_P": "H7",
        "LA02_N": "H8",
        "LA04_P": "H10",
        "LA04_N": "H11",
        "LA07_P": "H13",
        "LA07_N": "H14",
        "LA11_P": "H16",
        "LA11_N": "H17",
        "LA15_P": "H19",
        "LA15_N": "H20",
        "LA19_P": "H22",
        "LA19_N": "H23",
        "LA21_P": "H25",
        "LA21_N": "H26",
        "LA24_P": "H28",
        "LA24_N": "H29",
        "LA28_P": "H31",
        "LA28_N": "H32",
        "LA30_P": "H34",
        "LA30_N": "H35",
        "LA32_P": "H37",
        "LA32_N": "H38",
        }
    ),
]

class Platform(XilinxPlatform):
    default_clk_name = "clk200"
    default_clk_period = 5  # 200 MHz

    def __init__(self):
        XilinxPlatform.__init__(self, "xc7z045-ffg900-1", _io, _connectors,
            toolchain="vivado")
