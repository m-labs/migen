from mibuild.generic_platform import *
from mibuild.xilinx_ise import XilinxISEPlatform, CRG_SE

_io = [
    ("IO_L1P_A25_1", 0, Pins("B14"), IOStandard("LVCMOS33")),
    ("IO_L1N_A24_VREF_1", 0, Pins("B15"), IOStandard("LVCMOS33")),
    ("IO_L30P_A21_M1RESET_1_NOTLX4", 0, Pins("G11"), IOStandard("LVCMOS33")),
    ("IO_L30N_A20_M1A11_1_NOTLX4", 0, Pins("G12"), IOStandard("LVCMOS33")),
    ("IO_L31P_A19_M1CKE_1_NOTLX4", 0, Pins("F11"), IOStandard("LVCMOS33")),
    ("IO_L31N_A18_M1A12_1_NOTLX4", 0, Pins("F12"), IOStandard("LVCMOS33")),
    ("IO_L32P_A17_M1A8_1_NOTLX4", 0, Pins("H10"), IOStandard("LVCMOS33")),
    ("IO_L32N_A16_M1A9_1_NOTLX4", 0, Pins("H11"), IOStandard("LVCMOS33")),
    ("IO_L33P_A15_M1A10_1", 0, Pins("C14"), IOStandard("LVCMOS33")),
    ("IO_L33N_A14_M1A4_1", 0, Pins("C15"), IOStandard("LVCMOS33")),
    ("IO_L34P_A13_M1WE_1_NOTLX4", 0, Pins("H12"), IOStandard("LVCMOS33")),
    ("IO_L34N_A12_M1BA2_1_NOTLX4", 0, Pins("G13"), IOStandard("LVCMOS33")),
    ("IO_L35P_A11_M1A7_1", 0, Pins("D13"), IOStandard("LVCMOS33")),
    ("IO_L35N_A10_M1A2_1", 0, Pins("D15"), IOStandard("LVCMOS33")),
    ("IO_L36P_A9_M1BA0_1", 0, Pins("J11"), IOStandard("LVCMOS33")),
    ("IO_L36N_A8_M1BA1_1", 0, Pins("J13"), IOStandard("LVCMOS33")),
    ("IO_L37P_A7_M1A0_1", 0, Pins("E14"), IOStandard("LVCMOS33")),
    ("IO_L37N_A6_M1A1_1", 0, Pins("E15"), IOStandard("LVCMOS33")),
    ("IO_L38P_A5_M1CLK_1", 0, Pins("K10"), IOStandard("LVCMOS33")),
    ("IO_L38N_A4_M1CLKN_1", 0, Pins("K11"), IOStandard("LVCMOS33")),
    ("IO_L39P_M1A3_1", 0, Pins("F13"), IOStandard("LVCMOS33")),
    ("IO_L39N_M1ODT_1", 0, Pins("F15"), IOStandard("LVCMOS33")),
    ("IO_L40P_GCLK11_M1A5_1", 0, Pins("K12"), IOStandard("LVCMOS33")),
    ("IO_L40N_GCLK10_M1A6_1", 0, Pins("L12"), IOStandard("LVCMOS33")),
    ("IO_L41P_GCLK9_IRDY1_M1RASN_1", 0, Pins("G14"), IOStandard("LVCMOS33")),
    ("IO_L41N_GCLK8_M1CASN_1", 0, Pins("G15"), IOStandard("LVCMOS33")),
    ("IO_L42P_GCLK7_M1UDM_1", 0, Pins("H13"), IOStandard("LVCMOS33")),
    ("IO_L42N_GCLK6_TRDY1_M1LDM", 0, Pins("H15"), IOStandard("LVCMOS33")),
    ("IO_L43P_GCLK5_M1DQ4_1", 0, Pins("J14"), IOStandard("LVCMOS33")),
    ("IO_L43N_GCLK4_M1DQ5_1", 0, Pins("J15"), IOStandard("LVCMOS33")),
    ("IO_L44P_A3_M1DQ6_1", 0, Pins("K13"), IOStandard("LVCMOS33")),
    ("IO_L44N_A2_M1DQ7_1", 0, Pins("K15"), IOStandard("LVCMOS33")),
    ("IO_L45P_A1_M1LDQS_1", 0, Pins("L14"), IOStandard("LVCMOS33")),
    ("IO_L45N_A0_M1LDQSN_1", 0, Pins("L15"), IOStandard("LVCMOS33")),
    ("IO_L46P_FCS_B_M1DQS2_1", 0, Pins("M13"), IOStandard("LVCMOS33")),
    ("IO_L46N_FOE_B_M1DQ3_1", 0, Pins("M15"), IOStandard("LVCMOS33")),
    ("IO_L47P_FWE_B_M1DQ0_1", 0, Pins("N14"), IOStandard("LVCMOS33")),
    ("IO_L47N_LDC_M1DQ1_1", 0, Pins("N15"), IOStandard("LVCMOS33")),
    ("IO_L74P_AWAKE_1", 0, Pins("P14"), IOStandard("LVCMOS33")),
    ("IO_L74N_DOUT_BUSY_1", 0, Pins("P15"), IOStandard("LVCMOS33")),
    ("IO_L39P_M3LDQS_3", 0, Pins("L2"), IOStandard("LVCMOS33")),
    ("IO_L39N_M3LDQSN_3", 0, Pins("L1"), IOStandard("LVCMOS33")),
    ("IO_L40P_M3DQ6_3", 0, Pins("K3"), IOStandard("LVCMOS33")),
    ("IO_L40N_M3DQ7_3", 0, Pins("K1"), IOStandard("LVCMOS33")),
    ("IO_L41P_GCLK27_M3DQ4_3", 0, Pins("J2"), IOStandard("LVCMOS33")),
    ("IO_L41N_GCLK26_M3DQ5_3", 0, Pins("J1"), IOStandard("LVCMOS33")),
    ("IO_L42P_GCLK25_TRDY2_M3UDM_3", 0, Pins("H3"), IOStandard("LVCMOS33")),
    ("IO_L42N_GCLK24_M3LDM_3", 0, Pins("H1"), IOStandard("LVCMOS33")),
    ("IO_L43P_GCLK23_M3RASN_3", 0, Pins("K4"), IOStandard("LVCMOS33")),
    ("IO_L43N_GCLK22_IRDY2_M3CASN_3", 0, Pins("J3"), IOStandard("LVCMOS33")),
    ("IO_L44P_GCLK21_M3A5_3", 0, Pins("G2"), IOStandard("LVCMOS33")),
    ("IO_L44N_GCLK20_M3A6_3", 0, Pins("G1"), IOStandard("LVCMOS33")),
    ("IO_L45P_M3A3_3", 0, Pins("K5"), IOStandard("LVCMOS33")),
    ("IO_L45N_M3ODT_3", 0, Pins("J4"), IOStandard("LVCMOS33")),
    ("IO_L46P_M3CLK_3", 0, Pins("F3"), IOStandard("LVCMOS33")),
    ("IO_L46N_M3CLKN_3", 0, Pins("F1"), IOStandard("LVCMOS33")),
    ("IO_L52P_M3A8_3", 0, Pins("E2"), IOStandard("LVCMOS33")),
    ("IO_L52N_M3A9_3", 0, Pins("E1"), IOStandard("LVCMOS33")),
    ("IO_L53P_M3CKE_3", 0, Pins("D4"), IOStandard("LVCMOS33")),
    ("IO_L53N_M3A12_3", 0, Pins("E3"), IOStandard("LVCMOS33")),
    ("IO_L54P_M3RESET_3", 0, Pins("D3"), IOStandard("LVCMOS33")),
    ("IO_L54N_M3A11_3", 0, Pins("D1"), IOStandard("LVCMOS33")),
    ("IO_L83P_3", 0, Pins("C2"), IOStandard("LVCMOS33")),
    ("IO_L83N_VREF_3", 0, Pins("C1"), IOStandard("LVCMOS33")),
    ("EIM_BCLK", 0, Pins("N12"), IOStandard("LVCMOS33")),
    ("EIM_EB1", 0, Pins("P13"), IOStandard("LVCMOS33")),
    ("EIM_DA7", 0, Pins("P11"), IOStandard("LVCMOS33")),
    ("EIM_CS1", 0, Pins("R11"), IOStandard("LVCMOS33")),
    ("EIM_DA6", 0, Pins("M11"), IOStandard("LVCMOS33")),
    ("EIM_DA5", 0, Pins("N11"), IOStandard("LVCMOS33")),
    ("EIM_DA13", 0, Pins("R10"), IOStandard("LVCMOS33")),
    ("EIM_DA12", 0, Pins("L9"), IOStandard("LVCMOS33")),
    ("EIM_DA11", 0, Pins("M10"), IOStandard("LVCMOS33")),
    ("EIM_CS2", 0, Pins("N9"), IOStandard("LVCMOS33")),
    ("EIM_LBA", 0, Pins("R9"), IOStandard("LVCMOS33")),
    ("IO_L29P_GCLK3_2", 0, Pins("N8"), IOStandard("LVCMOS33")),
    ("EIM_DA10", 0, Pins("M8"), IOStandard("LVCMOS33")),
    ("CLKO", 0, Pins("N7"), IOStandard("LVCMOS33")),
    ("EIM_DA9", 0, Pins("K8"), IOStandard("LVCMOS33")),
    ("EIM_DA8", 0, Pins("L8"), IOStandard("LVCMOS33")),
    ("EIM_EB0", 0, Pins("P7"), IOStandard("LVCMOS33")),
    ("EIM_OE", 0, Pins("R7"), IOStandard("LVCMOS33")),
    ("EIM_DA0", 0, Pins("N6"), IOStandard("LVCMOS33")),
    ("EIM_RW", 0, Pins("R6"), IOStandard("LVCMOS33")),
    ("EIM_DA4", 0, Pins("P5"), IOStandard("LVCMOS33")),
    ("EIM_DA3", 0, Pins("R5"), IOStandard("LVCMOS33")),
    ("EIM_DA2", 0, Pins("L6"), IOStandard("LVCMOS33")),
    ("EIM_DA1", 0, Pins("L5"), IOStandard("LVCMOS33")),
    ("EIM_DTACK", 0, Pins("N4"), IOStandard("LVCMOS33")),
    ("EIM_WAIT", 0, Pins("R4"), IOStandard("LVCMOS33")),
    ("EIM_DA15", 0, Pins("M5"), IOStandard("LVCMOS33")),
    ("EIM_DA14", 0, Pins("N5"), IOStandard("LVCMOS33")),
    ("FPGA_INITB", 0, Pins("P3"), IOStandard("LVCMOS33")),
    ("FPGA_PROGRAM", 0, Pins("R2"), IOStandard("LVCMOS33"))
    ]


class Platform(XilinxISEPlatform):
    def __init__(self):
        XilinxISEPlatform.__init__(self, "xc6slx9-2csg225", _io,
            lambda p: CRG_SE(p, "IO_L29P_GCLK3_2", None))

    def do_finalize(self, fragment):
        try:
            self.add_platform_command("""
NET "{IO_L29P_GCLK3_2}" TNM_NET = "GRPCLK3";
TIMESPEC "TSCLK3" = PERIOD "GRPCLK3" 10 ns HIGH 50%;
""", IO_L29P_GCLK3_2=self.lookup_request("IO_L29P_GCLK3_2"))
        except ConstraintError:
            pass
